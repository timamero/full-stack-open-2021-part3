{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personsServices","getAll","axios","get","create","newObject","post","deleteObj","objId","delete","update","object","put","Filter","handleFilterChange","filter","onChange","value","PersonForm","handleSubmit","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","Person","name","number","handleDelete","onClick","Persons","personsToShow","map","person","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","messageStyle","borderRadius","padding","marginTop","marginBottom","width","fontSize","successMessageStyle","border","color","errorMessageStyle","useEffect","then","response","data","toLowerCase","includes","style","event","target","preventDefault","find","alert","window","confirm","obj","changedObj","id","personObject","concat","setTimeout","catch","error","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f85eeae0.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject)\r\n}\r\n\r\nconst deleteObj = objId => {\r\n    return axios.delete(`${baseUrl}/${objId}`)\r\n}\r\n\r\nconst update = (objId, object) => {\r\n    return axios.put(`${baseUrl}/${objId}`, object)\r\n}\r\n\r\nconst personsServices = { getAll, create, deleteObj, update }\r\nexport default personsServices;","import React, { useState, useEffect } from \"react\";\nimport personsServices from './services/persons'\n\nconst Filter = ({handleFilterChange, filter}) => {\n  return <div>filter shown with: <input onChange={handleFilterChange} value={filter}/></div>\n}\n\nconst PersonForm = ({handleSubmit, handleNameChange, handleNumberChange, newName, newNumber}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n        <div>\n          name: <input onChange={handleNameChange} value={newName}/>\n        </div>\n        <div>\n          phone: <input onChange={handleNumberChange} value={newNumber} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nconst Person = ({name, number, handleDelete}) => {\n  return (\n    <li>\n        {name} {number}\n        <button value={name} onClick={handleDelete}>Delete?</button>\n    </li>\n  )}\n\nconst Persons = ({personsToShow, handleDelete}) => {\n  return (\n    <ul>\n      {personsToShow.map(person => (\n        <Person key={person.name} name={person.name} number={person.number} handleDelete={handleDelete}/>\n        )\n      )}\n    </ul>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ successMessage, setSuccessMessage ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState('')\n\n  const messageStyle = {\n    borderRadius: 5,\n    padding: 8,\n    marginTop: 16,\n    marginBottom: 16,\n    width: \"max-content\",\n    fontSize: 20\n  }\n\n  const successMessageStyle = {\n    ...messageStyle,\n    border: \"2px solid #29A33B\",\n    color: \"#29A33B\"\n  }\n\n  const errorMessageStyle = {\n    ...messageStyle,\n    border: \"2px solid #A32929\",\n    color: \"#A32929\"\n  }\n\n  useEffect(() => {\n    personsServices.getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    \n    const nameList = persons.map(person => person.name)\n    \n    if (!nameList.includes(newName)) {\n      const personObject = {\n      name: newName,\n      number: newNumber\n      }\n\n      personsServices.create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n          setNewName('')\n          setNewNumber('')\n        }).then(() => {\n          setSuccessMessage(`Added ${personObject.name}`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 3000)\n        })\n    \n    } else {\n      const number = persons.find(person => person.name === newName).number\n      if (number === newNumber) {\n        alert(`${newName} is already added to phonebook`) \n      \n      } else {\n        if (window.confirm(`${newName} is already in the phonebook, replace the old number with the new number?`)) {\n          const obj = persons.find(person => person.name === newName)\n          const changedObj = {...obj, number: newNumber}\n          personsServices.update(obj.id, changedObj)\n            .then(response => {\n              setPersons(persons.map(person => person.name !== newName ? person : response.data))\n            })\n        }\n      }  \n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const handleDelete = (event) => {\n    if (window.confirm(`Do you want to delete the information for ${event.target.value}`)) {\n      const obj = persons.find(person => person.name === event.target.value)\n      personsServices.deleteObj(obj.id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== obj.id))\n        }).catch(error => {\n          console.log(error)\n          setErrorMessage(`Information of ${obj.name} has already been removed from server`)\n          setTimeout(() => {\n            setErrorMessage('')\n          }, 3000)\n        })\n    }\n  }\n\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {successMessage \n        ? <div style={successMessageStyle}>{successMessage}</div> \n        : errorMessage \n          ? <div style={errorMessageStyle}>{errorMessage}</div>\n          : null\n      }\n      <Filter handleFilterChange={handleFilterChange} filter={filter} />\n      <h2>Add new person</h2>\n      <PersonForm \n        handleSubmit={handleSubmit}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} handleDelete={handleDelete}/>\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}