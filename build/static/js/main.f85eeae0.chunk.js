(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),c=t.n(a),r=(t(20),t(4)),o=t(3),i=t(2),u=t(5),l=t.n(u),d="/api/persons",b={getAll:function(){return l.a.get(d)},create:function(e){return l.a.post(d,e)},deleteObj:function(e){return l.a.delete("".concat(d,"/").concat(e))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n)}},s=t(0),j=function(e){var n=e.handleFilterChange,t=e.filter;return Object(s.jsxs)("div",{children:["filter shown with: ",Object(s.jsx)("input",{onChange:n,value:t})]})},h=function(e){var n=e.handleSubmit,t=e.handleNameChange,a=e.handleNumberChange,c=e.newName,r=e.newNumber;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:t,value:c})]}),Object(s.jsxs)("div",{children:["phone: ",Object(s.jsx)("input",{onChange:a,value:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.name,t=e.number,a=e.handleDelete;return Object(s.jsxs)("li",{children:[n," ",t,Object(s.jsx)("button",{value:n,onClick:a,children:"Delete?"})]})},m=function(e){var n=e.personsToShow,t=e.handleDelete;return Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)(f,{name:e.name,number:e.number,handleDelete:t},e.name)}))})},O=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(""),u=Object(o.a)(c,2),l=u[0],d=u[1],f=Object(i.useState)(""),O=Object(o.a)(f,2),p=O[0],v=O[1],x=Object(i.useState)(""),g=Object(o.a)(x,2),w=g[0],C=g[1],S=Object(i.useState)(""),N=Object(o.a)(S,2),k=N[0],y=N[1],A=Object(i.useState)(""),D=Object(o.a)(A,2),T=D[0],B=D[1],E={borderRadius:5,padding:8,marginTop:16,marginBottom:16,width:"max-content",fontSize:20},F=Object(r.a)(Object(r.a)({},E),{},{border:"2px solid #29A33B",color:"#29A33B"}),I=Object(r.a)(Object(r.a)({},E),{},{border:"2px solid #A32929",color:"#A32929"});Object(i.useEffect)((function(){b.getAll().then((function(e){a(e.data)}))}),[]);var J=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),k?Object(s.jsx)("div",{style:F,children:k}):T?Object(s.jsx)("div",{style:I,children:T}):null,Object(s.jsx)(j,{handleFilterChange:function(e){C(e.target.value)},filter:w}),Object(s.jsx)("h2",{children:"Add new person"}),Object(s.jsx)(h,{handleSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(l)){if(t.find((function(e){return e.name===l})).number===p)alert("".concat(l," is already added to phonebook"));else if(window.confirm("".concat(l," is already in the phonebook, replace the old number with the new number?"))){var n=t.find((function(e){return e.name===l})),c=Object(r.a)(Object(r.a)({},n),{},{number:p});b.update(n.id,c).then((function(e){a(t.map((function(n){return n.name!==l?n:e.data})))}))}}else{var o={name:l,number:p};b.create(o).then((function(e){a(t.concat(e.data)),d(""),v("")})).then((function(){y("Added ".concat(o.name)),setTimeout((function(){y(null)}),3e3)}))}},handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){v(e.target.value)},newName:l,newNumber:p}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(m,{personsToShow:J,handleDelete:function(e){if(window.confirm("Do you want to delete the information for ".concat(e.target.value))){var n=t.find((function(n){return n.name===e.target.value}));b.deleteObj(n.id).then((function(){a(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){console.log(e),B("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){B("")}),3e3)}))}}})]})};c.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f85eeae0.chunk.js.map